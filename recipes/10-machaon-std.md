# Как работать со стандартной js-библиотекой Machaon

Говорить о стандартной библиотеке пока несколько рано, потому что пока все на стадии раннего прототипа.
Тем не менее, есть вероятность, что в нее в конечном счете войдут типичные решения, которые мы раз за разом применяем во фронтенд-проектах.

На данном этапе стандартные возможности собраны в директории `./src/scripts/std` (есть шорткат `@std`), и написаны на Typescript.
Это может показаться непривычным, но её при этом можно импортировать и задействовать в обычных js-файлах.

В базовом случае вам достаточно унаследовать ваш основной js-класс `App` от базового класса `@std/app`. Сделаем это в `./src/scripts/main/app.js`:

    import {App as StdApp} from "@std/app";

    export default class App extends StdApp {
        constructor() {
            super();
        }
    }

Далее нам нужно как-то работать с экземпляром этого приложения, сделать его доступным глобально.
В рецепте по [организации Javascript](04-scripts.md) мы договорились, что эта инициализация происходит в `./src/main.js`:

    import App from "@main/app";
    window.App = App.getInstance();

Обратите внимание, что `std/app` реализует синглтон, поэтому вместо конструктора `new` мы задействуем `getInstance()`.
Экземпляр приложения прописывается в window и будет доступен глобально.

## Что это нам дает

Пока не слишком много — библиотека только начинает пополняться. Но кое-что интересное уже есть.

### Работа с конфигурацией

После инициализации можно сохранить в приложении произвольный объект конфигурации:

    window.App.loadConfig({
        foo: {
            bar: "baz"
        }
    });

А затем удобно получать нужные опции:

    window.App.getOption("foo.bar"); // baz
    window.App.getOption("option.not.exists", "some default value"); // some default value

### Работа с локализацией

Можно получить правильный URL с учетом текущего языка (он соответствует bitrix-константе LANGUAGE_ID):

    window.App.getUrl("/about", "en"); // /en/about